core functionality for the stm32
